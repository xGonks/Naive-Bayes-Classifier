---
title: "scrap"
author: "Todos"
format:
   html:
     toc: true
     html-math-method: katex
     embed-resources: true
     self-contained-math: true
     df-print: kable
editor: visual
---

```{r}
library(robotstxt)
library(rvest)
library(httr)
```

```{r}
paths_allowed("https://www.yourghoststories.com/")
```

```{r}
page = read_html("https://www.yourghoststories.com/real-ghost-story.php?story=1")
page
```

```{r}
titulo = page %>%
  html_nodes(".storytitle") %>%
  html_text()

titulo
```

```{r}
for (x in 1:10) {
  url = sprintf("https://www.yourghoststories.com/real-ghost-story.php?story=%d", x)
  
  if (status_code(GET(url)) == 200) {
    page = read_html(url)
    titulo = page %>%
      html_nodes(".storytitle") %>%
      html_text()
    cadena_formateada = sprintf("%d: %s", x, titulo)
    print(cadena_formateada)
  } else {
    print(sprintf("%d: ERROR", x))
  }
}
```
