---
title: "scrap"
author: "Todos"
format:
   html:
     toc: true
     html-math-method: katex
     embed-resources: true
     self-contained-math: true
     df-print: kable
editor: visual
---

```{r}
library(robotstxt)
library(rvest)
library(httr)
```

```{r}
paths_allowed("https://www.yourghoststories.com/")
```

```{r}
page = read_html("https://www.yourghoststories.com/real-ghost-story.php?story=1")
page
```

```{r}
titulo = page %>%
  html_nodes(".storytitle") %>%
  html_text()

titulo
```

```{r}
titles <- character()

for (x in 1:10) {
  url = sprintf("https://www.yourghoststories.com/real-ghost-story.php?story=%d", x)
  
  if (status_code(GET(url)) == 200) {
    page <- read_html(url)
    
    title = page %>%
      html_node(".storytitle") %>%
      html_text()
    titles <- c(titles, title)
    
    countrie = page %>%
      html_node("a:nth-child(7)") %>%
      html_text()
    countries <- c(countries, countrie)
    
    state = page %>%
      html_node("a:nth-child(9)") %>%
      html_text()
    states <- c(states, state)
    
    type = page %>%
      html_node("a:nth-child(11)") %>%
      html_text()
    types <- c(types, type)
    
    description = page %>%
      html_node("#story") %>%
      html_text()
    descriptions <- c(descriptions, description)
  }
}

data_pages <- tibble(
  title=titles,
  countrie=countries,
  state=states,
  type=types,
  description=descriptions
)
data_pages
```

```{r}
titles <- character()

for (x in 1:10) {
  url = sprintf("https://www.yourghoststories.com/real-ghost-story.php?story=%d", x)
  
  if (status_code(GET(url)) == 200) {
    page <- read_html(url)
    
    title = page %>%
      html_node(".storytitle") %>%
      html_text()
    titles <- c(titles, title)
    
    countrie = page %>%
      html_node("a:nth-child(7)") %>%
      html_text()
    countries <- c(countries, countrie)
  }
}

data_pages <- tibble(
  title=titles,
  countrie=countries
)
data_pages
```

```{r}
titles
```

```{r}
countries
```

```{r}
titles <- character()

for (x in 1:10) {
  url = sprintf("https://www.yourghoststories.com/real-ghost-story.php?story=%d", x)
  
  if (status_code(GET(url)) == 200) {
    page <- read_html(url)
    countrie = page %>%
      html_node("a:nth-child(7)") %>%
      html_text()
    countries <- c(countries, countrie)
  }
}
countries
data_pages <- tibble(
  countrie=countries
)
data_pages
```

```{r}
countries
```


